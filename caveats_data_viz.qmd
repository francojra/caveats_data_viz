---
title: "Ressalvas para Visualização de Dados"
format: html
editor: visual
date: today
author: Jeanne Raquel de Andrade Franco
lang: pt
---

### Gráficos de barras e linhas

#### Cortar ou não cortar (o eixo y)?

Cortar ou não cortar o eixo y é um dos tópicos mais discutidos na visualização de dados. A questão envolve se o eixo y deve ou não começar do zero.

Usar gráficos de barras que não começam do zero é ruim, entretanto, em gráficos de séries temporais não há problemas. Os gráficos de barras enfatizam a magnitude absoluta dos valores associados a cada categoria. Enquanto um gráfico de linhas enfatiza a mudança da variável dependente ao longo do tempo (eixo x).

**Gráfico de barras**: nesse tipo de gráfico existe um consenso em que o eixo y deve começar do zero.

Veja como ocorrem diferenças na comparação das barras entre países quando elas começam do zero e quando não começam.

![](images/GTAI_average_hours.gif){fig-align="center" width="500"}

![](images/GTAI_redrawn.png){fig-align="center"}

**Gráfico de linhas**: nesses tipo não há consenso, mesmo que não inicie do zero.

Nesse caso abaixo não ocorre problema devido ao eixo y não iniciar do zero.

![](images/CBPC_households.png){fig-align="center"}

Nesses casos abaixo pode ocorrer problemas na interpretação da mudança da variável dependente ao longo do tempo quando ela começa do zero, pois a escala camufla as variações. Veja esses dois gráficos.

![](images/Global-2-copy-600x337.jpg){fig-align="center"}

![](images/Global-1-copy-600x315.jpg){fig-align="center"}

Entretanto, aqui vemos um caso contrário em que não começar o eixo y do zero pode superestimar os dados.

![](images/CO1-1-copy-600x384.jpg){fig-align="center" width="1406"}

![](images/CO2-2-copy.jpg){fig-align="center"}

### Gráficos de pizza

Costumam ser ruins por definição. Um gráfico de pizza mostra um circulo dividido em setores em que cada um representa a proporção do todo. Ele é frequentemente usado para mostrar porcentagens, onde a soma dos setores é igual a 100%.

O problema é que os olhos humanos são ruins em ler ângulos. Compare abaixo os três gráficos de pizza e tente identificar quais as cores que apresentam as maiores porcentagens.

![](images/download.png){fig-align="center"}

Agora analise as barras abaixo com os respectivos valores. Veja que, de forma mais clara, nós conseguimos perceber as diferenças entre as barras.

![](images/download%20(1).png){fig-align="center"}

Os gráficos de pizza podem ficar ainda piores quando são adicionadas as seguintes características:

-   3D;

-   Legenda ao lado;

-   Porcentagens que não somam 100%;

-   Muitos itens;

-   Gráficos de pizza explodidas (com partes separadas).

#### Alternativas aos gráficos de pizza

Oa gráficos de barras são as melhores alternativas aos gráficos de pizza. Se você tem muitas variáveis, você também pode considerar o lollipop, um gráfico mais elegante que o de barras, como este abaixo.

![](images/download%20(2)-01.png){fig-align="center"}

Outra alternativa é criar um treemap se o seu objetivo é descrever do que o todo é composto. Veja um exemplo de treemap abaixo.

![](images/download%20(3)-01.png){fig-align="center"}

### O boxplot e suas armadilhas

O boxplot permite um bom resumo de uma ou mais variáveis numéricas. Um boxplot é composto de vários elementos:

1.  A linha que divide o box em 2 partes representa a mediana, ou quartil 2 (Q2), dos dados. Se a mediana é 10, significa que existem o mesmo número de dados acima e abaixo de 10.

2.  Os finais do box representam os quartis inferior (Q1) e superior (Q3). Se o terceiro quartil é 15, isso significa que 75% das observações são menores que 15.

3.  A diferença entre os quartis 1 e 3 é chamada de distância interquartis (interquartile range - IQR).

4.  Os extremos das linhas (valores mais alto e mais baixo) são interpretados como Q3 + 1.5 x IQR e Q1 - 1.5x IQR, respectivamente.

5.  Pontos extremos que estão além das linhas representam os outliers.

Veja um esquema da representação de um boxplot:

![A anatomia de um boxplot.](images/download%20(4).png){fig-align="center"}

O boxplot pode resumir a distribuição de uma variável numérica para vários grupos. Entretanto, resumir pode também significar perda de informações, e isto pode ser uma armadilha. Se considerarmos o boxplot abaixo, é fácil concluir que o grupo C tem um maior valor comparado aos outros grupos. Entretanto, nós não podemos ver a distribuição dos pontos nem o número de observações.

![](images/download%20(5).png)

Vamos ver o que acontece com o boxplot quando adicionamos novos elementos.

#### Adicionando jitter

Se a quantidade de observações que você está trabalhando não é muito grande, adicionar jitter no topo do boxplot pode tornar o gráfico mais confiável e perspicaz.

![](images/download%20(6).png)

No gráfico acima alguns padrões aparecem mais claramente. O grupo C tem um pequeno tamanho amostral comparado aos outros grupos. Isso definitivamente deve ser algo que você deve encontrar antes de afirmar que o grupo C é o que apresenta o maior valor. Além disso, é perceptível que o grupo B apresenta uma distribuição bimodal (pontos distribuídos em dois subgrupos, com y em torno de 18 e 13).

#### Alternando para o gráfico de violino

Se você tem uma grande quantidade de amostras, usar jitter não é uma boa opção devido a alta sobreposição dos pontos, tornando a figura ininterpretável. Uma alternativa, é usar o gráfico de violino, que descreve a distribuição dos dados de cada grupo.

![](images/download%20(7).png){fig-align="center"}

Com esse gráfico fica bem claro que cada grupo tem diferentes distribuições. A distribuição bimodal do grupo B se torna evidente. Gráficos de violino é uma poderosa forma de exibir informações da distribuição dos dados.

#### Adicionando o tamanho da amostra

No gráfico anterior, o tamanho da amostra (n) de cada grupo está definido abaixo do nome. Isso é uma boa prática, pois mostra que o grupo C está sub-representado. Entretanto, algumas vezes é melhor mostrar os pontos dos dados por eles mesmos. Assim, uma boa alternativa é exibir a metade do violino junto aos dados brutos em forma de histograma. Veja o gráfico abaixo.

![](images/download%20(8).png){fig-align="center"}

### O problema das barras de erro

As barras de erro dão uma ideia geral da precisão dos dados, ou inversamente, a que distância do valor relatado o valor verdadeiro (sem erros) pode estar. Se o valor exibido nas barras é resultado de uma agregação (como os valores médios de vários pontos), você pode querer inserir as barras de erro.

![](images/download-01.png){fig-align="center"}

No gráfico acima 5 grupos são registrados. A altura das barras representa os valores médios. As barras de erro em preto informam como as observações estão dispersas em volta da média. Por exemplo, parece que as medidas do grupo B são mais precisas que as do grupo E.

#### Barras de erro escondem informações

O primeiro problema com as barras de erro é que elas escondem informações. A figura ilustra que os dados completos podem sugerir diferentes conclusões nas estatísticas resumidas. O mesmo gráfico de barras com os erros da esquerda pode representar várias situações. Ambos os grupos podem ter o mesmo tipo de distribuição (B), um grupo pode ter outliers (C), um grupo pode ter distribuição bimodal (D), ou os grupos podem ter tamanhos amostrais desiguais (E).

![](images/download%20(1)-01.png){fig-align="center"}

Assim, o mesmo gráfico de barras com erros pode de fato contar muitas histórias diferentes, escondidas para o leitor.

::: {.callout-caution appearance="simple"}
Sempre mostre os pontos de dados individuais se você puder.
:::

#### O que é uma barra de erro?

O segundo problema das barras de erro é que elas são usadas para mostrar diferentes métricas, e não é sempre clara que ela está sendo mostrada. Três tipos de valores são comumente usados para barras de erro, algumas vezes dando resultados muito diferentes. Aqui estão as definições gerais dos erros e como calculá-los.

-   [Desvio padrão (SD):]{.underline} representa a quantidade de dispersão da variável. Calculada como a raiz quadrada da variância.

-   [Erro padrão (SE):]{.underline} desvio padrão da média da variável, calculado como o desvio padrão dividido pela raiz quadrada do tamanho da amostra. Por padrão, o SE é menor que o SD. Com uma grande amostra o SE tende a se aproximar de 0.

-   [Intervalo de confiança (CI):]{.underline} é definido de modo que haja uma probabilidade especificada de que um valor esteja dentro dele. É calculado como t \* SE onde t é o valor da distribuição de t-student para um alfa específico. O valor dele é frequentemente arredondado para 1,96 (para uma grande amostra). No entanto, se o tamanho da amostra for grande ou a distribuição não for normal, é melhor calcular o IC usando o método bootstrap.

Aqui está uma aplicação dessas três métricas do famoso banco de dados Iris. Ele mostra a média do comprimento de sépalas de três espécies de Iris. A variação em torno da média está representada pelas barras de erro.

![](images/download%20(2)-02.png){fig-align="center"}

É bastante óbvio que as 3 métricas relatam diferentes visualizações e conclusões.

::: {.callout-caution appearance="simple"}
Sempre especifique qual a métrica você usou para as barras de erro.
:::

#### Soluções alternativas

É melhor evitar as barras de erros o máximo que puder. Claro que não é possível se você tiver apenas estatísticas resumidas. Mas se você conhece os pontos individuais, apresente eles. Várias alternativas são possíveis. O boxplot com jitter é ideal para uma relativamente pequena quantidade de dados. O gráfico de violino é uma outra possibilidade se você tem uma grande quantidade de amostras.

![](images/download%20(3)-02.png){fig-align="center"}

### Por que não usar gráficos com dois eixos? Quais são as alternativas?

Acreditamos que gráficos com dois eixos diferentes faz deles difíceis para a maioria das pessoas fazerem interpretações corretas sobre os dados. Nós recomendamos fortemente duas alternativas: usar dois gráficos ao invés de um e usar gráficos indexados.

#### Por que as pessoas usam gráficos com dois eixos?

Nós observamos e encontramos que a maioria das pessoas usam eles para mostrar:

1.  **Duas séries de dados com a mesma unidade de medida**, mas com magnitudes diferentes. Veja o gráfico abaixo sobre produto interno bruto.

    ![](images/full-180508_index2.png)

2.  **Duas séries de dados que mostram os valores absolutos e relativos** de algo.

    ![](images/full-180508_index3.png)

3.  **Duas séries de dados para valores totalmente diferentes**. O gráfico abaixo mostra o produto interno bruto de um país em um eixo e a expectativa de vida em outro.

    ![](images/full-180508_index4.png)

4.  **Apenas uma série de dados**, mas com o eixo y com diferentes escalas. O gráfico abaixo mostra os valores da temperatura em Fahrenheit e em Celsius.

    ![](images/full-180508_index5.png)

    Como podemos ver, gráficos com dois eixos são frequentemente usados para mostrar duas diferentes séries de dados. Frequentemente, o objetivo desses gráficos é comparar duas tendências uma com a outra. Isso dá aos leitores a possibilidade de fazer muito sentido - mas existem algumas razões do porque gráficos com dois eixos não serem melhor caminho. De fato, desses quatro casos, nós imaginamos que apenas o último pode ser usado sem problemas, desde que seja usado apenas o eixo para mostrar diferentes escalas e não série de dados.

#### Os problemas com gráficos de dois eixos

Aqui está o problema de forma resumida: as escalas dos gráficos com dois eixos são arbitrárias e podem, portanto, confundir os leitores sobre a relação entre as duas séries de dados.

O gráfico abaixo tem dois eixos diferentes: o eixo da esquerda corresponde ao produto interno bruto global entre 40 e 80 trilhões de dólares. O eixo da direita mostra o produto interno bruto da Alemanha que varia entre 2,5 e 4 trilhões de dólares. A medida em dólar é a mesma, mas nós temos uma enorme diferença na magnitude. Veja alguns problemas disso:

-   **Linhas de base zero em alturas diferentes podem enganar:** as proporções de duas escalas são frequentemente diferentes uma da outra em um gráfico com dois eixos. Se o gráfico da esquerda começar no zero, ele seria duas vezes mais longo e se o da direita começar do zero, teria que ser três vezes mais longo.

![](images/full-180508_index12.png){fig-align="center"}

Portanto, embora o gráfico pareça que o PIB alemão e o PIB global aumentam aproximadamente na mesma taxa (pelo menos até 2014), isso não acontece. O PIB global aumentou 80% até 2014; o PIB da Alemanha em 40%.

A maioria das pessoas é acostumada a ver gráficos de linha com apenas uma escala. Então, quando elas vêem um gráfico de linhas com duas escalas, a intuição delas é pensar "Isto é como ler um gráfico com uma linha" - modo: "Oh, duas linhas, legal, mesma taxa, interessante. Os leitores precisam se lembrar ativamente de que essas duas linhas têm menos relação do que estão acostumados a ver em um gráfico de linhas.

Mas este é um problema que pode ser resolvido? Nós podemos apenas estabelecer a linha do zero na mesma altura. Exceção:

-   **Mesmo linhas de base zero na mesma altura podem enganar:**

Se extendermos os dois eixos até a base zero, ele podem ter a mesma altura. No melhor dos casos, os leitores podem agora pensar: "Parece que o produto interno bruto local aumentou mais que o produto interno bruto da Alemanha". No pior dos casos, os leitores podem pensar: "Nos primeiros anos, o produto interno bruto da Alemanha foi maior que o produto interno bruto Global. E então em 2011, os dois produtos internos brutos foram os mesmos."

![](images/full-180508_index11.png){fig-align="center"}

Por que os leitores pensariam assim? Porque os humanos têm a tendência de colocar as coisas em relação se estiverem por perto, e essa relação se torna uma grande parte do significado que eles veem nas coisas. Pontos de dados e séries de dados não são exceções nesses casos. Nós automaticamente comparamos linhas e pontos uns com os outros, então se torna difícil lembrar que diferentes escalas estão envolvidas. Se as coisas parecem próximas nos gráficos, é difícil lembrar constantemente que na verdade, eles estão a quilômetros de distância.

#### Eles são apenas difíceis de ler

"Ha", você poderia dizer, "os leitores apenas necessitam olhar mais atentamente para o gráfico. Olhei para este gráfico por um minuto e descobri tudo." Bem, que bom para você. Mas a maioria dos nossos leitores não gostam de raciocinar demais na leitura deles. (Que é ok, nós devemos fazer a matemática para eles.)

Um estudo de 2011 confirma essa afirmação. Petra Isenberg, Anastasia Bezerianos, Pierre Dragicevic and Jean-Daniel Fekete mostraram a 15 pessoas quatro diferentes gráficos em que todos mostravam valores em diferentes magnitudes, e observaram como bem elas poderiam ler os gráficos. Um deles era um gráfico com dois eixos, que os pesquisadores chamaram de "gráfico sobreposto".

O que eles encontraram foi:

> *Nós econtramos que o gráfico sobreposto performaram pobremente em termos de acurácia e tempo. O feedback dos participantes no questionário também foi claramente contra o gráfico sobreposto e ele foi rankeado como o pior por todos, exceto um participante. Os participantes acharam ele muito confuso e com alta demanda de concentração ou reflexão para decifrar a não-monótica e descontínua natureza das duas escalas.*
>
> --- [A Study on Dual-Scale Data Charts](https://www.lri.fr/~isenberg/publications/papers/Isenberg_2011_ASO.pdf)

Os pesquisadores vão além e recomendam evitar completamente gráficos com dois eixos. Nós concordamos. Nós tentamos mostrar que o perigo dos gráficos com dois eixos é que eles não são intuitivos. Os designers de gráficos tem a liberdade de manipular os eixos como eles desejam, que podem levar a primeira impressão visual muito diferente do que os dados realmente dizem.

#### Alternativas

Entretanto, há esperança! Existem alternativas. Aqui nós iremos apresentar quatro delas: dois gráficos, gráficos indexados, gráficos rotulados e gráficos de dispersão conectados.

-   **Solução 1 - gráfico lado-a-lado:** se o problema é que as duas linhas criam um único significado porque elas estão próximas, então devemos separar elas. A primeira solução é criar dois diferentes gráficos com as duas séries de dados, também chamados de gráficos lado-a-lado (side-by-side-charts). A vantagem é que nos gráficos lado a lado não importa o quanto os números diferem: nós podemos criar dois diferentes eixos para dois gráficos diferentes. A diferença é que dois gráficos pode necessitar de mais espaço do que apenas um.

    ![](images/full-180508_index7.png)

-   **Solução 2 - gráficos indexados:** se quiser manter ambas as séries de dados em um único gráfico, nós podemos criar um gráfico indexado. Este gráfico não nos mostra os números absolutos, mas mostra a mudança relativa das séries de dados ao longo do tempo: a porcentagem em que a variável aumentou ou diminuiu ao longo do tempo. Rótulos no gráfico podem trazer informações sobre os números absolutos (variáveis e unidades de medida). Esse abordagem funciona apenas para séries de dados com taxas similares de mudanças. Cole Nussbaumer Knaflic enfatiza muito bem esse ponto em um de seus artigos: Se uma das séries de dados mudar em +10000% e a outra em apenas +5%, a última linha ficará quase invisível.

    ![](images/full-180508_index10.png)

-   **Solução 3 - priorizar e rotular:** a terceira ideia para evitar o gráfico com dois eixos é apenas mostrar uma linha: a mais importante das duas séries de dados. Nós então podemos usar anotações no gráfico para adicionar informações sobre a outra séries de dados que foi excluída. Essa solução não trabalha bem para muitos dados, mas pode ser uma ótima alternativa aos gráficos de dois eixos que apresentam números absolutos e relativos da mesma medida. Por exemplo, o seguinte gráfico mostra a taxa de desemprego nos Estados Unidos, mas fornece informações em números absolutos na forma de anotações.

    ![](images/full-180508_index14-01.png)

<!-- -->

-   **Solução 4 - gráfico de dispersão conectado:** aqui fica chique. Um gráfico de dispersão conectado mantem uma das variáveis no eixo y - mas ao invés do tempo no eixo x, ele irá receber a segunda variável. O tempo fica na forma de anotações dentro do gráfico. É realmente pouco intuitivo, mas muito divertido. No nosso exemplo, esse tipo de gráfico pode estar exagerado, mas existem casos em que eles são as melhores alternativas para apresentar uma ideia.

    ![](images/full-180508_index13.png)

Das quatro alternativas apresentadas, as duas primeiras serão as mais úteis na maioria dos casos.

### O paradoxo de Simpson

#### Definição

O paradoxo de Simpson, ou Efeito Yule-Simpson, é um fenômeno das probabilidades e estatísticas, em que uma tendência aparece em diferentes grupos de dados mas desaparece ou se inverte quando esses grupos são combinados. Algumas vezes recebe o nome de Paradoxo Reverso ou Paradoxo da Amálgama.

#### Exemplo

Vamos considerar o seguinte gráfico de dispersão construído a partir dos dados dummy.

![](images/download-02.png){fig-align="center"}

Nele faz total sentido declarar que existe uma correlação positiva entre as variáveis x e y. O coeficiente da correlação de Pearson é 0,63.

Entretanto, vamos verificar o que acontece se considerarmos os grupos presentes no conjunto de dados (3 grupos):

![](images/download%20(1)-02.png){fig-align="center"}

Aqui, nós entendemos que a correlação positiva foi devido à diferença entre grupos. Na realidade, o coeficiente de correlação é negativo se cada grupo é considerado separadamente.

Esse é o Paradoxo de Simpson: a tendência entre duas variáveis inverte quando uma terceira variável (grupos) é incluída.

#### Impacto na visualização de dados

O impacto é forte na visualização e nas análises de dados. O Paradoxo de Simpson pode levar a uma conclusão errada com correlações espúrias. Sempre verifique duas vezes o potencial efeito confundidor das variáveis disponíveis no seu conjunto de dados.

### Porque você deve ordenar seus dados

Por padrão, a maioria das ferramentas de visualização de dados ordena os grupos de variáveis categóricas por ordem alfabética, ou usa a ordem de aparência da sua tabela. É uma boa prática pensar sobre essa ordem, pois alterá-la pode agregar muito conhecimento ao seu gráfico.

#### Gráficos lollipop não ordenados

Vamos começar com um gráfico lollipop mostrando a quantidade de armas vendidas por alguns países. Aqui cada linha representa um país e o eixo x mostra quantas armas tem sido vendidas em 2017. Os países foram ordenados em ordem alfabética por padrão.

![](images/download-03.png){fig-align="center"}

É bastante óbvio que Estados Unidos e Rússia vendem bem mais armas que os outros países. Entretanto, é bastante difícil ver a diferença entre as vendas dos outros países, o leitor precisa ir de um a outro para comparar entre eles. Isso é muito trabalhoso e irá definitivamente descartar a atenção do seu gráfico.

#### Reordene o gráfico

Vamos utilizar o mesmo gráfico lollipop, mas reordenando cada grupo pelos valores deles.

![](images/download%20(1)-03.png){fig-align="center"}

A figura agora é muito mais perspicaz, com a França agora sendo o terceiro mais com maior exportação, seguido da Alemanha, Israel e Reino Unido. Claro, note que faria sentido normalizar este gráfico pela população de cada país para ter dados mais comparáveis.

#### Conclusão

Reordenar os seus dados deveria ser um passo que você deveria sempre considerar quando construir o gráfico. Claro, algumas vezes a ordem dos grupos deve ser estabelecida pelas características deles e não pelos valores, como os meses do ano, mas vale a pena pensar nisso.

### O gráfico de espaguete

O gráfico de espaguete é um gráfico de linha exibido com muitas linhas juntas. Com um pouco mais de 5 grupos, esse tipo de gráfico se torna difícil de ser lido, e assim fornece pouco insight sobre os dados. Vamos ver um exemplo sobre a evolução do número de nomes de bebês dos Estados Unidos entre 1880 e 2015.

![](images/download-04.png){fig-align="center"}

Vemos que é muito difícil seguir uma linha para entender a evolução da popularidade de um nome específico. Ainda, mesmo que você tente seguir uma linha, você então necessita ligar ela com a legenda que também é difícil de ler com a associação das respectivas cores. Vamos tentar encontrar algumas soluções alternativas para melhorar este gráfico.

1.  **Segmentar um grupo específico:** vamos dizer que você fez um gráfico com muitos grupos, mas o verdadeiro motivo para isso é explicar a característica de um grupo particular comparado aos outros. Então uma boa solução alternativa é destacar esse grupo: tornar ele diferente, e adicionar um pequeno texto sobre ele. Aqui, a evolução da popularidade do nome Amanda é óbvia. Abandonar as outras linhas é importante desde que isso permite você comparar o nome Amanda aos outros nomes.

    ![](images/download%20(1)-04.png)

2.  **Usar múltiplas pequenas janelas:** gráficos de área podem ser usados para dar uma visão mais geral dos dados, especialmente quando usado em combinação com múltiplas pequenas janelas. No seguinte gráfico, é fácil obter um resumo da evolução de cada nome. Podemos verificar que o nome *Linda* foi um nome popular por um curto período de tempo. Por outro lado, *Ida* nunca tem sido um nome Popular, mas foi usado um pouco durante várias décadas.

    ![](images/download%20(2)-03.png)

3.  **Combinando as abordagens:** note que se você quiser comparar a evolução de cada linha umas com as outras, você pode combinar as duas abordagens mencionadas.

    ![](images/download%20(3)-03.png)

### Brinque com o tamanho do bin do histograma

Um histograma toma como entrada uma variável numérica e corta ele em vários bins (caixas). O número de observações em cada bin é representado pela altura da barra. É um tipo de gráfico muito comum e a maioria das ferramentas selecionam um valor do tamanho de bin padrão.

Entretanto, essa escolha do tamanho do bin pode ter um forte impacto sobre a ideia do gráfico. Vamos olhar a distribuição dos preços por noite do Airbnb da Riviera Francesa:

![](images/download-05.png){fig-align="center"}

O preço varia entre 10 a 300 euros, com a maioria dos apartamentos alcançando entre 60 e 150 euros por noite. Nesse gráfico, os preços são cortados em vários bins de 10 euros: entre 0 e 10 euros uma noite, 10 e 20 euros e assim por diante. Iso é representado pelo eixo X. Então, o número de apartamentos por bin é contado e representado pelo eixo Y.

Vamos checar o que acontece quando os preços são divididos em bins de 2 euros ao invés de 10:

![](images/download%20(1)-05.png){fig-align="center"}

Existe uma grande diferença entre os dois histogramas. Alguns valores estão super-representados no conjunto de dados (como 58, 64, 69, 75, 80...). Isso é definitivamente um sinal que você quer entender quando analisar seus dados.

### Muitas distribuições

Comparar a distribuição de muitas variáveis numéricas é um tarefa comum na visualização de dados. A distribuição de uma variável pode ser representada usando um histograma ou um gráfico de densidade, e é muito tentador representar muitas distribuições no mesmo eixo.

Aqui está um exemplo mostrando como pessoas percebem o vocabulário de probabilidade. No tópico /r/samplesize do reddit, perguntas como Qual probabilidade você atribuiria à frase "Altamente provável" foram feitas. Aqui está a distribuição dos scores dado pelas pessoas para cada questão:

![](images/download%20(2)-04.png){fig-align="center"}

Nesse caso, a figura está bastante organizada. Pessoas dão uma probabilidade entre 0 e 20% para a sentança "Quase sem chance", e entre 75 e 100% para "Quase certamente". Vamos checar o que acontece com mais grupos:

![](images/download%20(3)-04.png){fig-align="center"}

Agora a figura está bastante confusa e é impossível distinguir os grupos: existem muitas distribuições representadas no mesmo gráfico.

#### Soluções alternativas

Várias alternativas existem e são apresentadas em detalhes [nessa página](https://www.data-to-viz.com/story/OneNumOneCatSeveralObs.html). Aqui é apenas uma visão geral das possibilidades.

**Boxplot**

![](images/download%20(4)-01.png){fig-align="center"}

**Violino**

![](images/download%20(5)-01.png){fig-align="center"}

**Ridgeline**

![](images/download%20(6)-01.png){fig-align="center"}

**Faceting**

![](images/download%20(7)-01.png){fig-align="center"}

### Como evitar sobreplotagem

Quando você tem um grande conjunto de dados, os pontos do seu gráfico de dispersão tendem a se sobrepor, tornando o gráfico ilegível. Essa questão está ilustrada nesse gráfico abaixo. Na primeira observação, é impossível verificar a existância de alguma relação entre os eixos x e y, o que seria uma conclusão errada sobre os dados.

![](images/download-06.png){fig-align="center"}

Aqui vão 10 sugestões de como resolver esse problema.

#### Diminuir o tamanho dos pontos

A solução mais fácil é reduzir o tamanho dos pontos. Dependendo da quantidade de potnos sobrepostos, ele pode solucionar o problema. Como podemos ver, agora claramente aparecem três agrupamentos que foram camuflados no gráfico anterior.

![](images/download%20(1)-06.png){fig-align="center"}

#### Transparência

Em combinação com a redução do tamanho dos pontos, a transparência ajuda a revelar padrões em gráficos com plotagem excessiva.

![](images/download%20(2)-05.png){fig-align="center"}

#### Gráfico de densidade 2D

O gráfico de densidade 2D basicamente conta o número de observações dentro de uma particular área de um espaço 2D e representa essa contagem em diferentes cores. Se você divide o espaço em vários quadrados, você obtem um histograma em 2D. Se usar hexagonos ao invés de quadrados, você obtem um gráfico hexbin. Você também pode calcular a densidade estimada e representar gráficos de densidade 2D ou gráficos de contorno.

![](images/download%20(3)-05.png){fig-align="center"}

#### Amostragem

Algumas vezes menos é mais. Plotar apenas uma fração de seus dados (aqui 5%) pode significativamente reduzir tempo e evitar sobreplotagem.

![](images/download%20(4)-02.png){fig-align="center"}

#### Destacar um grupo

Um outro caminho para reduzir a complexidade de um gráfico é destacar um grupo específico.

![](images/download%20(5)-02.png){fig-align="center"}

#### Agrupamento

Se você tem variáveis agrupadas, é bastante recomendável tornar eles destacados no gráfico. Em casos de sobreplotagem, isso pode ajudar a revelar padrões.

![](images/download%20(6)-02.png){fig-align="center"}

#### Facetação

Assim como você tem vários grupos em seu gráfico, uma alternativa é usar o facetamento: o mesmo gráfico é repetido com os grupos destacados em diferentes espaços ou janelas.

![](images/download%20(7)-02.png){fig-align="center"}

#### Jittering

Jittering (tremor na traduação para o português) é uma opção quando um dos eixos é qualitativo (como 1, 2, 3...). Ele adiciona um valor randômico para cada ponto para evitar sobreplotagem.

![](images/download%20(8)-01.png){fig-align="center"}

#### Distribuição marginal

Adicionar distribuições marginais permite ao leitor detectar a distribuição escondida na sobreplotagem do gráfico. Podemos adicionar boxplots, histogramas ou gráficos de densidade nas margens.

![](images/download%20(9).png){fig-align="center"}

### O que considerar quando escolher as cores na visualização de dados

A visualização de dados pode ser definida como a representação de números através de formas (áreas, linhas, pontos) e de cores. Algumas vezes as cores servem para tornas as formas vísiveis, outras vezes elas mesmas condificam os dados ou categorias. Nós iremos focar principalmente na última opção mencionada e no que podemos considerar ao escolher as cores.

#### Quando usar cores na visualização de dados

Considere se existe uma alternativa melhor às cores de gradiente ao codificar os valores mais importantes. Cores de gradiente podem ser ótimas para mostrar um padrão, mas ela dificulta decifrar valores reais na diferença entre as categorias de grupos. Assim, considere mostrar seus mais importantes valores com barras, gráficos de ponto (dotplot) ou mesmo áreas, e use cores apenas para mostrar diferenças entre categorias (grupos), isso confunde menos os leitores que poderão decifrar os valores mais rápido.

![](images/rule7-1536x653.png){fig-align="center"}

Se você necessitar de mais que sete cores em um gráfico, considere usar um outro tipo de gráfico ou agrupar as categorias juntas. As cores facilitam para os leitores distinguirem entre categorias, mas tente evitar usar mais que sete cores. Quanto mais cores em um gráfico, maior a dificuldade para ler os grupos. Os leitores necessitarão frequentemente consultar a legenda para entender o que cada uma representa. Portanto, considere usar um outro tipo de gráfico.

![](images/rule10-1536x653.png){fig-align="center"}

#### Como fazer melhores escolhas de cores

**Considere usar as mesmas cores em gráficos diferentes para as mesmas variáveis.** Se você usa as mesmas cores para todos os seus gráficos referentes as mesmas variáveis, isso evita de tornar seu trabalho muito colorido. Por exemplo, é ok mostrar a variável desemprego em azul no primeiro gráfico e poucos parágrafos depois usar a mesma cor para a variável renda per capita com a mesma cor. Para não confundir leitores e permitir comparações, considere usar as mesmas cores novamente se você está mostrando dados sobre as mesmas categorias.

![](images/rule14-1536x653.png){fig-align="center"}

**Certifique de explicar aos leitores os códigos de suas cores.** Toda marca visual que representa um valor ou variável deve ser explicada: a altura de suas barras representam a média? O que o tamanho de um círculo no mapa representa? O mesmo serve para as cores. Existem muitas formas para criar a chave de uma cor, aqui estão três delas:

![](images/rule13-1536x530.png){fig-align="center"}

**Considere a cor cinza como a mais importante na visualização de dados.** Usar a cor cinza para elementos menos importantes do gráfico torna as cores destacadas (reservadas para pontos mais importantes do gráfico) se destacarem ainda mais. Cinza também é útil para o contexto geral dos dados, anotações menos importantes, para mostrar o que não é selecionado pelo usuário e para tornar seu gráfico com um visual menos chamativo. Mesmo que o cinza possa parecer muito frio, considere usar ele com um toque de cor, tente um cinza com tonalidade mais quente, ou use uma cor como o amarelo.

![](images/Artboard-1-copy-25-1-1536x653.png){fig-align="center"}

**Certifique que os contrastes são altos o suficiente.** Cuidar dos contrastes significa cuidar para que seus leitores sejam capazes de ler o texto no gráfico, mesmo com pouca luz e se usar cores claras como o cinza. Isso é espcialmente importante para textos, quanto menor o texto, mais alto necessita ser o contraste e plano de fundo para tornar o texto legível. A taxa de contraste deve ser de 2.5 para textos grandes e 4 para textos menores. Em adição ao contraste, evite cores complementares (ex.: vermelho e verde ou laranja e azul) e cores brilhantes como plano de fundo. Use [essa ferramenta](https://snook.ca/technical/colour_contrast/colour.html#fg=BDBDBD,bg=E7E7E7) para testar o contraste entre as cores.

![](images/contrast-copy-1536x653.png){fig-align="center"}

**Verifique onde as cores aparecem em relação umas as outras.** Quanto menor as áreas do seu gráfico e maior a distância entre elas, mais dificuldade o leitor sentirá para interpretar seu gráfico e compará-las. Considere dar aos pontos e linhas um alto contraste na sua tonalidade ou brilho, e assim, tornar eles mais disntinguíveis. Entretanto, para grandes áreas podemos usar menor contraste, especialmente se não existe nenhuma outra cor entre essas áreas.

![](images/Artboard-89-copy-15-1536x653.png){fig-align="center"}

**Use cores intuitivas.** Quando escolher uma paleta de cores, considere o significado delas na cultura da sua audiência. Se possível, use cores que os leitores irão associar com os dados de qualquer maneira, por exemplo, a cor vermelha pode representar uma variável do partido republicano e a cor azul do partido democratas; cores da natureza: floresta = verde, lago = azul; cores de aprendizado: atenção/parar/ruim = vemelho, bom = verde. Quando usar cores para representar gêneros evite usar a combinação esteriotipada do rosa-azul. Para não confundir os leitores, tente cores frias (azul ou lilás) para homens e cores quentes (laranja ou amarelo) para mulheres.

![](images/rule12-1536x653.png){fig-align="center"}

**Use cores claras para valores baixos e cores escuras para valores altos.** Quando usar gradiente de cores, tenha certeza que cores claras representam valores baixos, enquanto cores escuras representam valores altos. Isso será intuitivo para a maior parte dos leitores.

![](images/rule6-copy-1536x653.png){fig-align="center"}

**Não use cores de gradiente para categorias e vice-versa.** Pode ser tentador usa a mesma cor com diferentes contrastes para diferentes categorias, para fazer o gráfico parecer menos colorido. Entretanto, muitos leitores podem associar cores escuras com "mais/alto" e cores claras com "menos/baixo", tal paleta implicará em um rankeamento das suas categorias. Use diferentes cores para as suas categorias. Se precisar usar muitas cores (mais que 7), considere usar outro tipo de gráfico.

![](images/rule6-1536x653.png){fig-align="center"}

**Use a luminosidade para criar gradientes, não apenas tonalidade.** Se você quiser tentar: não coloque mais de dois tons com a mesma luminosidade em seu gradiente, desenhe seu gráfico de uma cor mais clara (ex. branco) para uma cor mais escura (ex. azul) de uma forma consistente. Gradientes com muitas variações em luminosidade (em escalas de arco-íris) podem confundir os leitores.

![](images/Artboard-89-copy-20-1536x705.png){fig-align="center"}

**Considere usar dois tons para um gradiente, não apenas um.** Esse é o próximo passo para fazer seu gráfico ou mapa ainda mais decifrável. Os leitores serão capazes de distinguir melhor as cores do gradiente se eles são codificados atravpes da luminosidade e duas ou três cuidadosamente selecionadas tonalidades.

![](images/Artboard-89-copy-17-1536x704.png){fig-align="center"}

**Considere usar cores de gradiente divergentes.** Se você quiser enfatizar como uma variável desvia de uma linha de base (digamos, a média nacional), você pode querer usar uma paleta de cores divergentes. É importante usar tonalidades claramente divergentes para poder comparar ambos os lados do gradiente. A cor do centro idealmente deverá ser um cinza claro, não branco:

![](images/Artboard-89-copy-19-1536x704.png){fig-align="center"}

**Considere as pessoas daltônicas.** Usar diferentes luminosidades em seus gradientes na sua paleta de cores tem a grande vantagem de que leitores com visão de cores deficiente irão ainda ser capazes de distinguir suas cores. Existem diferentes tipos de cegueiras de cores. Use uma [ferramenta online](https://www.color-blindness.com/coblis-color-blindness-simulator/) ou check as cores [nesse link](https://blog.datawrapper.de/colorblind-check/) para ter certeza que usuários daltônicos podem distinguir as cores no gráfico. O pacote `cols4all` do R permite que você selecione paleta de cores que são amigáveis a pessoas com daltonismo.

![](images/rule16-1536x1478.png){fig-align="center"}

### Não seja contra-intuitivo

As pessoas costumam ver os dados exibidos de maneira usual e lógica. Não respeitar os padrões da visualização de dados pode fazer seu gráfico difícil de entender, ou mesmo levar a sua audiência a uma conclusão incorreta.

#### Revertendo os eixos

O eixo Y quase sempre está disposto de baixo ao topo do gráfico. Aqui está um exemplo de um eixo Y revertido. O gráfico vem de um artigo que descreve a evolução das mortes por armas de fogo na Flórida.

![](images/download.jpeg){fig-align="center"}

Considerando que nós não estamos acostumados a ver esse tipo de eixo, é bastante difícil entender que o número de mortes por armas de fogo na Flórida aumentou entre os anos de 90 e 2010. Pior ainda, uma rápida observação no gráfico sem prestar atenção ao eixo Y pode levar a uma conclusão errônea que o número de acidentes reduziu nesse período.

#### Trapacear com cores

Aqui está um e-mail de marketing do Google. Ele descreve o comportamento de 41% dos clientes, mas o verde do círculo representa aparentemente 59% do gráfico, que é muito errôneo.

![](images/download%20(1).jpeg){fig-align="center"}

#### Conclusão

Um bom gráfico inclui peças dos dados que ensinam algo novo a um leitor. Se essas novas peças da informação são exibidas de maneira contra-intuitiva, ela pode tornar a visualização mais fascinante, mas muito confusa ou errônea para a audiência. Em alguns casos ser criativo é necessário para uma visualização impactante, mas em geral é importante respeitar os padrões de visualização para não confundir a audiência.

### Erros de cálculo

Essa provavelmente é uma das armadilhas mais óbvias dessa coleção, mas provavelmente a mais frequente também. Inconsistências numéricas em um gráfico, tornam ele completamente inútil.

#### Quando as porcentagens que não somam 100%

Por exemplo, quando exibimos porcentagem em um gráfico de pizza, tenha certeza que as porcentagens somam 100%.

![](images/download-07.jpeg){fig-align="center"}

Além da inconsistência numérica, também notamos o uso do 3D explodido no gráfico de pizza que é provavelmente o pior erro na visualização de dados e para transmitir informações inventadas.

#### Quando os valores não correspondem aos recursos visuais

No seguinte exemplo, o valor de 45% é ligada a maior parte do gráfico; claramente, existe algo errado.

![](images/download-08.png){fig-align="center"}

### Cuidado com os gráficos de barras radiais

Um gráfico de barra radial é basicamente um gráfico de barras plotado em coordenadas polares ao invés do plano cartesiano. O gráfico abaixo está mostrando a quantidade de armas exportadas pelos seis maiores exportadores em 2017.

![](images/download%20(1)-07.png){fig-align="center"}

O bom desse tipo de gráfico é que ele é bastante atraente. Entretanto, devido as barras serem plotadas sobre diferentes pontos radiais do eixo polar, eles tem diferentes raios e não podem ser comparados pelos comprimentos deles. Uma barra por fora irá ser maior pela construção que uma por dentro, mesmo que elas apresentem valores iguais.

Nota: outra questão envolvendo esse gráfico é a ausência do eixo Y. Esse gráfico é feito apenas para fins ilustrativos.

O problema com o gráfico radial está bem ilustrado abaixo:

![](images/download%20(2)-06.png){fig-align="center"}

#### Alternativas

Por causa dessas questões, o gráfico de barras radial deve ser evitado. Ao invés, você pode construir um gráfico de barras padrão ou um gráfico lollipop ('pirulito') para exibir as informações de forma mais acurada.

![](images/download%20(3)-06.png){fig-align="center"}

### Conecte os pontos quando o eixo X estiver ordenado

Vamos considerar um conjunto de dados composto por duas variáveis numéricas. O eixo X representa os anos e o eixo Y representa o número de manchas solares entre os anos de 1749 e 1983. Manchas solares são fenômenos temporários sobre a fotosfera do sol que se parecem manchas mais escuras que as áreas em volta.

![](images/unnamed-chunk-1-1.png){fig-align="center"}

Aqui é difícil ver alguma tendência. Parece que não existe nenhuma relação entre tempo e número de manchas solares.

Entretanto, **se o seu eixo X é ordenado**, como o tempo, **você deve conectar os pontos**.

Vamos ver como fica o mesmo gráfico agora com os pontos conectados juntos com o segmento. Nós mudamos de gráfico de dipsersão para gráfico de linha.

![](images/unnamed-chunk-2-1.png){fig-align="center"}

Agora, é óbvio que existe um padrão. O número de manchas solares segue a mudança no período de 11 anos da atividade solar. É possível perceber melhor a linha variando de cima para baixo ao longo do tempo regularmente. Também é claro que alguns picos são mais altos que os outros, com o número de manchas variando entre 50 e 180 aproximadamente.

### Não use cores que não comunicam nada

Cores são um dos principais meios para comunicar uma informação na visualização de dados. Elas nos permitem destacar grupos ou variações quando usadas apropriadamente, mas por outro lado, pode confunir ou levar a conclusões errôneas.

Aqui está um exemplo mostrando a quantidade de armas exportadas pelos 20 maiores exportadores do mundo em 2017.

![](images/download-09.png){fig-align="center"}

Aqui cada país está representado por uma cor aleatória. Ao observar isso, sua audiência pode tentar entender o que cada cor significa, e ficam menos focados sobre o principal ponto: o comprimento das barras.

#### Cor: apenas para uma informação adicional

Aqui está o mesmo gráfico usando uma única cor para todos os países. Na minha opinião, ele é mais informativo.

![](images/download%20(1)-08.png){fig-align="center"}

Note que você também pode usar cor para destacar uma específica variação em barras selecionadas, aquelas que achar mais importantes. Pessoalmente, não sou fã dessa prática, mas ela é comum.

![](images/download%20(2)-07.png){fig-align="center"}

#### Conclusão

Quando adicionar cores ao gráfico, certifique que as cores adicionam informações. As cores são importantes para:

-   Mostrar e comparar grupos;

-   Destacar um item;

-   Mostrar um gradiente de variação.

### Dimensionamento para raio ou área?

Uma prática comum na visualização de dados consiste no dimensionamento de um componente gráfico para um valor numérico. Por exemplo, os comprimentos das barras são dimensionados para valores em um gráfico de barras. Quando o valor é dimensionado para uma área, o escalonamento dele por duas áreas ao mesmo tempo produz um efeito quadrático para uma mudança linear. Isso amplifica as diferenças.
