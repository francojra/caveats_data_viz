---
title: "Ressalvas para Visualização de Dados"
format: html
editor: visual
date: today
author: Jeanne Raquel de Andrade Franco
lang: pt
---

### Gráficos de barras e linhas

#### cortar ou não cortar (o eixo y)?

Cortar ou não cortar o eixo y é um dos tópicos mais discutidos na visualização de dados. A questão envolve se o eixo y deve ou não começar do zero.

Usar gráficos de barras que não começam do zero é ruim, entretanto, em gráficos de séries temporais não há problemas. Os gráficos de barras enfatizam a magnitude absoluta dos valores associados a cada categoria. Enquanto um gráfico de linhas enfatiza a mudança da variável dependente ao longo do tempo (eixo x).

**Gráfico de barras**: nesse tipo de gráfico existe um consenso em que o eixo y deve começar do zero.

Veja como ocorrem diferenças na comparação das barras entre países quando elas começam do zero e quando não começam.

![](images/GTAI_average_hours.gif){fig-align="center" width="500"}

![](images/GTAI_redrawn.png){fig-align="center"}

**Gráfico de linhas**: nesses tipo não há consenso, mesmo que não inicie do zero.

Nesse caso abaixo não ocorre problema devido ao eixo y não iniciar do zero.

![](images/CBPC_households.png){fig-align="center"}

Nesses casos abaixo pode ocorrer problemas na interpretação da mudança da variável dependente ao longo do tempo quando ela começa do zero, pois a escala camufla as variações. Veja esses dois gráficos.

![](images/Global-2-copy-600x337.jpg){fig-align="center"}

![](images/Global-1-copy-600x315.jpg){fig-align="center"}

Entretanto, aqui vemos um caso contrário em que não começar o eixo y do zero pode superestimar os dados.

![](images/CO1-1-copy-600x384.jpg){fig-align="center" width="1406"}

![](images/CO2-2-copy.jpg){fig-align="center"}

### Gráficos de pizza

Costumam ser ruins por definição. Um gráfico de pizza mostra um circulo dividido em setores em que cada um representa a proporção do todo. Ele é frequentemente usado para mostrar porcentagens, onde a soma dos setores é igual a 100%.

O problema é que os olhos humanos são ruins em ler ângulos. Compare abaixo os três gráficos de pizza e tente identificar quais as cores que apresentam as maiores porcentagens.

![](images/download.png){fig-align="center"}

Agora analise as barras abaixo com os respectivos valores. Veja que, de forma mais clara, nós conseguimos perceber as diferenças entre as barras.

![](images/download%20(1).png){fig-align="center"}

Os gráficos de pizza podem ficar ainda piores quando são adicionadas as seguintes características:

-   3D;

-   Legenda ao lado;

-   Porcentagens que não somam 100%;

-   Muitos itens;

-   Gráficos de pizza explodidas (com partes separadas).

#### Alternativas aos gráficos de pizza

Oa gráficos de barras são as melhores alternativas aos gráficos de pizza. Se você tem muitas variáveis, você também pode considerar o lollipop, um gráfico mais elegante que o de barras, como este abaixo.

![](images/download%20(2)-01.png){fig-align="center"}

Outra alternativa é criar um treemap se o seu objetivo é descrever do que o todo é composto. Veja um exemplo de treemap abaixo.

![](images/download%20(3)-01.png){fig-align="center"}

### O boxplot e suas armadilhas

O boxplot permite um bom resumo de uma ou mais variáveis numéricas. Um boxplot é composto de vários elementos:

1.  A linha que divide o box em 2 partes representa a mediana, ou quartil 2 (Q2), dos dados. Se a mediana é 10, significa que existem o mesmo número de dados acima e abaixo de 10.

2.  Os finais do box representam os quartis inferior (Q1) e superior (Q3). Se o terceiro quartil é 15, isso significa que 75% das observações são menores que 15.

3.  A diferença entre os quartis 1 e 3 é chamada de distância interquartis (interquartile range - IQR).

4.  Os extremos das linhas (valores mais alto e mais baixo) são interpretados como Q3 + 1.5 x IQR e Q1 - 1.5x IQR, respectivamente.

5.  Pontos extremos que estão além das linhas representam os outliers.

Veja um esquema da representação de um boxplot:

![A anatomia de um boxplot.](images/download%20(4).png){fig-align="center"}

O boxplot pode resumir a distribuição de uma variável numérica para vários grupos. Entretanto, resumir pode também significar perda de informações, e isto pode ser uma armadilha. Se considerarmos o boxplot abaixo, é fácil concluir que o grupo C tem um maior valor comparado aos outros grupos. Entretanto, nós não podemos ver a distribuição dos pontos nem o número de observações.

![](images/download%20(5).png)

Vamos ver o que acontece com o boxplot quando adicionamos novos elementos.

#### Adicionando jitter

Se a quantidade de observações que você está trabalhando não é muito grande, adicionar jitter no topo do boxplot pode tornar o gráfico mais confiável e perspicaz.

![](images/download%20(6).png)

No gráfico acima alguns padrões aparecem mais claramente. O grupo C tem um pequeno tamanho amostral comparado aos outros grupos. Isso definitivamente deve ser algo que você deve encontrar antes de afirmar que o grupo C é o que apresenta o maior valor. Além disso, é perceptível que o grupo B apresenta uma distribuição bimodal (pontos distribuídos em dois subgrupos, com y em torno de 18 e 13).

#### Alternando para o gráfico de violino

Se você tem uma grande quantidade de amostras, usar jitter não é uma boa opção devido a alta sobreposição dos pontos, tornando a figura ininterpretável. Uma alternativa, é usar o gráfico de violino, que descreve a distribuição dos dados de cada grupo.

![](images/download%20(7).png){fig-align="center"}

Com esse gráfico fica bem claro que cada grupo tem diferentes distribuições. A distribuição bimodal do grupo B se torna evidente. Gráficos de violino é uma poderosa forma de exibir informações da distribuição dos dados.

#### Adicionando o tamanho da amostra

No gráfico anterior, o tamanho da amostra (n) de cada grupo está definido abaixo do nome. Isso é uma boa prática, pois mostra que o grupo C está sub-representado. Entretanto, algumas vezes é melhor mostrar os pontos dos dados por eles mesmos. Assim, uma boa alternativa é exibir a metade do violino junto aos dados brutos em forma de histograma. Veja o gráfico abaixo.

![](images/download%20(8).png){fig-align="center"}

### O problema das barras de erro

As barras de erro dão uma ideia geral da precisão dos dados, ou inversamente, a que distância do valor relatado o valor verdadeiro (sem erros) pode estar. Se o valor exibido nas barras é resultado de uma agregação (como os valores médios de vários pontos), você pode querer inserir as barras de erro.

![](images/download-01.png){fig-align="center"}

No gráfico acima 5 grupos são registrados. A altura das barras representa os valores médios. As barras de erro em preto informam como as observações estão dispersas em volta da média. Por exemplo, parece que as medidas do grupo B são mais precisas que as do grupo E.

#### Barras de erro escondem informações

O primeiro problema com as barras de erro é que elas escondem informações. A figura ilustra que os dados completos podem sugerir diferentes conclusões nas estatísticas resumidas. O mesmo gráfico de barras com os erros da esquerda pode representar várias situações. Ambos os grupos podem ter o mesmo tipo de distribuição (B), um grupo pode ter outliers (C), um grupo pode ter distribuição bimodal (D), ou os grupos podem ter tamanhos amostrais desiguais (E).

![](images/download%20(1)-01.png){fig-align="center"}

Assim, o mesmo gráfico de barras com erros pode de fato contar muitas histórias diferentes, escondidas para o leitor.

::: {.callout-caution appearance="simple"}
Sempre mostre os pontos de dados individuais se você puder.
:::

#### O que é uma barra de erro?

O segundo problema das barras de erro é que elas são usadas para mostrar diferentes métricas, e não é sempre clara que ela está sendo mostrada. Três tipos de valores são comumente usados para barras de erro, algumas vezes dando resultados muito diferentes. Aqui estão as definições gerais dos erros e como calculá-los.

-   [Desvio padrão (SD):]{.underline} representa a quantidade de dispersão da variável. Calculada como a raiz quadrada da variância.

-   [Erro padrão (SE):]{.underline} desvio padrão da média da variável, calculado como o desvio padrão dividido pela raiz quadrada do tamanho da amostra. Por padrão, o SE é menor que o SD. Com uma grande amostra o SE tende a se aproximar de 0.
