---
title: "Ressalvas para Visualização de Dados"
format: html
editor: visual
date: today
author: Jeanne Raquel de Andrade Franco
lang: pt
---

### Gráficos de barras e linhas

#### cortar ou não cortar (o eixo y)?

Cortar ou não cortar o eixo y é um dos tópicos mais discutidos na visualização de dados. A questão envolve se o eixo y deve ou não começar do zero.

Usar gráficos de barras que não começam do zero é ruim, entretanto, em gráficos de séries temporais não há problemas. Os gráficos de barras enfatizam a magnitude absoluta dos valores associados a cada categoria. Enquanto um gráfico de linhas enfatiza a mudança da variável dependente ao longo do tempo (eixo x).

**Gráfico de barras**: nesse tipo de gráfico existe um consenso em que o eixo y deve começar do zero.

Veja como ocorrem diferenças na comparação das barras entre países quando elas começam do zero e quando não começam.

![](images/GTAI_average_hours.gif){fig-align="center" width="500"}

![](images/GTAI_redrawn.png){fig-align="center"}

**Gráfico de linhas**: nesses tipo não há consenso, mesmo que não inicie do zero.

Nesse caso abaixo não ocorre problema devido ao eixo y não iniciar do zero.

![](images/CBPC_households.png){fig-align="center"}

Nesses casos abaixo pode ocorrer problemas na interpretação da mudança da variável dependente ao longo do tempo quando ela começa do zero, pois a escala camufla as variações. Veja esses dois gráficos.

![](images/Global-2-copy-600x337.jpg){fig-align="center"}

![](images/Global-1-copy-600x315.jpg){fig-align="center"}

Entretanto, aqui vemos um caso contrário em que não começar o eixo y do zero pode superestimar os dados.

![](images/CO1-1-copy-600x384.jpg){fig-align="center" width="1406"}

![](images/CO2-2-copy.jpg){fig-align="center"}

### Gráficos de pizza

Costumam ser ruins por definição. Um gráfico de pizza mostra um circulo dividido em setores em que cada um representa a proporção do todo. Ele é frequentemente usado para mostrar porcentagens, onde a soma dos setores é igual a 100%.

O problema é que os olhos humanos são ruins em ler ângulos. Compare abaixo os três gráficos de pizza e tente identificar quais as cores que apresentam as maiores porcentagens.

![](images/download.png){fig-align="center"}

Agora analise as barras abaixo com os respectivos valores. Veja que, de forma mais clara, nós conseguimos perceber as diferenças entre as barras.

![](images/download%20(1).png){fig-align="center"}

Os gráficos de pizza podem ficar ainda piores quando são adicionadas as seguintes características:

-   3D;

-   Legenda ao lado;

-   Porcentagens que não somam 100%;

-   Muitos itens;

-   Gráficos de pizza explodidas (com partes separadas).

#### Alternativas aos gráficos de pizza

Oa gráficos de barras são as melhores alternativas aos gráficos de pizza. Se você tem muitas variáveis, você também pode considerar o lollipop, um gráfico mais elegante que o de barras, como este abaixo.

![](images/download%20(2)-01.png){fig-align="center"}

Outra alternativa é criar um treemap se o seu objetivo é descrever do que o todo é composto. Veja um exemplo de treemap abaixo.

![](images/download%20(3)-01.png){fig-align="center"}

### O boxplot e suas armadilhas

O boxplot permite um bom resumo de uma ou mais variáveis numéricas. Um boxplot é composto de vários elementos:

1.  A linha que divide o box em 2 partes representa a mediana, ou quartil 2 (Q2), dos dados. Se a mediana é 10, significa que existem o mesmo número de dados acima e abaixo de 10.

2.  Os finais do box representam os quartis inferior (Q1) e superior (Q3). Se o terceiro quartil é 15, isso significa que 75% das observações são menores que 15.

3.  A diferença entre os quartis 1 e 3 é chamada de distância interquartis (interquartile range - IQR).

4.  Os extremos das linhas (valores mais alto e mais baixo) são interpretados como Q3 + 1.5 x IQR e Q1 - 1.5x IQR, respectivamente.

5.  Pontos extremos que estão além das linhas representam os outliers.

Veja um esquema da representação de um boxplot:

![A anatomia de um boxplot.](images/download%20(4).png){fig-align="center"}

O boxplot pode resumir a distribuição de uma variável numérica para vários grupos. Entretanto, resumir pode também significar perda de informações, e isto pode ser uma armadilha. Se considerarmos o boxplot abaixo, é fácil concluir que o grupo C tem um maior valor comparado aos outros grupos. Entretanto, nós não podemos ver a distribuição dos pontos nem o número de observações.

![](images/download%20(5).png)

Vamos ver o que acontece com o boxplot quando adicionamos novos elementos.

#### Adicionando jitter

Se a quantidade de observações que você está trabalhando não é muito grande, adicionar jitter no topo do boxplot pode tornar o gráfico mais confiável e perspicaz.

![](images/download%20(6).png)

No gráfico acima alguns padrões aparecem mais claramente. O grupo C tem um pequeno tamanho amostral comparado aos outros grupos. Isso definitivamente deve ser algo que você deve encontrar antes de afirmar que o grupo C é o que apresenta o maior valor. Além disso, é perceptível que o grupo B apresenta uma distribuição bimodal (pontos distribuídos em dois subgrupos, com y em torno de 18 e 13).

#### Alternando para o gráfico de violino

Se você tem uma grande quantidade de amostras, usar jitter não é uma boa opção devido a alta sobreposição dos pontos, tornando a figura ininterpretável. Uma alternativa, é usar o gráfico de violino, que descreve a distribuição dos dados de cada grupo.

![](images/download%20(7).png){fig-align="center"}

Com esse gráfico fica bem claro que cada grupo tem diferentes distribuições. A distribuição bimodal do grupo B se torna evidente. Gráficos de violino é uma poderosa forma de exibir informações da distribuição dos dados.

#### Adicionando o tamanho da amostra

No gráfico anterior, o tamanho da amostra (n) de cada grupo está definido abaixo do nome. Isso é uma boa prática, pois mostra que o grupo C está sub-representado. Entretanto, algumas vezes é melhor mostrar os pontos dos dados por eles mesmos. Assim, uma boa alternativa é exibir a metade do violino junto aos dados brutos em forma de histograma. Veja o gráfico abaixo.

![](images/download%20(8).png){fig-align="center"}

### O problema das barras de erro

As barras de erro dão uma ideia geral da precisão dos dados, ou inversamente, a que distância do valor relatado o valor verdadeiro (sem erros) pode estar. Se o valor exibido nas barras é resultado de uma agregação (como os valores médios de vários pontos), você pode querer inserir as barras de erro.

![](images/download-01.png){fig-align="center"}

No gráfico acima 5 grupos são registrados. A altura das barras representa os valores médios. As barras de erro em preto informam como as observações estão dispersas em volta da média. Por exemplo, parece que as medidas do grupo B são mais precisas que as do grupo E.

#### Barras de erro escondem informações

O primeiro problema com as barras de erro é que elas escondem informações. A figura ilustra que os dados completos podem sugerir diferentes conclusões nas estatísticas resumidas. O mesmo gráfico de barras com os erros da esquerda pode representar várias situações. Ambos os grupos podem ter o mesmo tipo de distribuição (B), um grupo pode ter outliers (C), um grupo pode ter distribuição bimodal (D), ou os grupos podem ter tamanhos amostrais desiguais (E).

![](images/download%20(1)-01.png){fig-align="center"}

Assim, o mesmo gráfico de barras com erros pode de fato contar muitas histórias diferentes, escondidas para o leitor.

::: {.callout-caution appearance="simple"}
Sempre mostre os pontos de dados individuais se você puder.
:::

#### O que é uma barra de erro?

O segundo problema das barras de erro é que elas são usadas para mostrar diferentes métricas, e não é sempre clara que ela está sendo mostrada. Três tipos de valores são comumente usados para barras de erro, algumas vezes dando resultados muito diferentes. Aqui estão as definições gerais dos erros e como calculá-los.

-   [Desvio padrão (SD):]{.underline} representa a quantidade de dispersão da variável. Calculada como a raiz quadrada da variância.

-   [Erro padrão (SE):]{.underline} desvio padrão da média da variável, calculado como o desvio padrão dividido pela raiz quadrada do tamanho da amostra. Por padrão, o SE é menor que o SD. Com uma grande amostra o SE tende a se aproximar de 0.

-   [Intervalo de confiança (CI):]{.underline} é definido de modo que haja uma probabilidade especificada de que um valor esteja dentro dele. É calculado como t \* SE onde t é o valor da distribuição de t-student para um alfa específico. O valor dele é frequentemente arredondado para 1,96 (para uma grande amostra). No entanto, se o tamanho da amostra for grande ou a distribuição não for normal, é melhor calcular o IC usando o método bootstrap.

Aqui está uma aplicação dessas três métricas do famoso banco de dados Iris. Ele mostra a média do comprimento de sépalas de três espécies de Iris. A variação em torno da média está representada pelas barras de erro.

![](images/download%20(2)-02.png){fig-align="center"}

É bastante óbvio que as 3 métricas relatam diferentes visualizações e conclusões.

::: {.callout-caution appearance="simple"}
Sempre especifique qual a métrica você usou para as barras de erro.
:::

#### Soluções alternativas

É melhor evitar as barras de erros o máximo que puder. Claro que não é possível se você tiver apenas estatísticas resumidas. Mas se você conhece os pontos individuais, apresente eles. Várias alternativas são possíveis. O boxplot com jitter é ideal para uma relativamente pequena quantidade de dados. O gráfico de violino é uma outra possibilidade se você tem uma grande quantidade de amostras.

![](images/download%20(3)-02.png){fig-align="center"}

### Por que não usar gráficos com dois eixos? Quais são as alternativas?

Acreditamos que gráficos com dois eixos diferentes faz deles difíceis para a maioria das pessoas fazerem interpretações corretas sobre os dados. Nós recomendamos fortemente duas alternativas: usar dois gráficos ao invés de um e usar gráficos indexados.

#### Por que as pessoas usam gráficos com dois eixos?

Nós observamos e encontramos que a maioria das pessoas usam eles para mostrar:

1.  **Duas séries de dados com a mesma unidade de medida**, mas com magnitudes diferentes. Veja o gráfico abaixo sobre produto interno bruto.

    ![](images/full-180508_index2.png)

2.  **Duas séries de dados que mostram os valores absolutos e relativos** de algo.

    ![](images/full-180508_index3.png)

3.  **Duas séries de dados para valores totalmente diferentes**. O gráfico abaixo mostra o produto interno bruto de um país em um eixo e a expectativa de vida em outro.

    ![](images/full-180508_index4.png)

4.  **Apenas uma série de dados**, mas com o eixo y com diferentes escalas. O gráfico abaixo mostra os valores da temperatura em Fahrenheit e em Celsius.

    ![](images/full-180508_index5.png)

    Como podemos ver, gráficos com dois eixos são frequentemente usados para mostrar duas diferentes séries de dados. Frequentemente, o objetivo desses gráficos é comparar duas tendências uma com a outra. Isso dá aos leitores a possibilidade de fazer muito sentido - mas existem algumas razões do porque gráficos com dois eixos não serem melhor caminho. De fato, desses quatro casos, nós imaginamos que apenas o último pode ser usado sem problemas, desde que seja usado apenas o eixo para mostrar diferentes escalas e não série de dados.

#### Os problemas com gráficos de dois eixos

Aqui está o problema de forma resumida: as escalas dos gráficos com dois eixos são arbitrárias e podem, portanto, confundir os leitores sobre a relação entre as duas séries de dados.

O gráfico abaixo tem dois eixos diferentes: o eixo da esquerda corresponde ao produto interno bruto global entre 40 e 80 trilhões de dólares. O eixo da direita mostra o produto interno bruto da Alemanha que varia entre 2,5 e 4 trilhões de dólares. A medida em dólar é a mesma, mas nós temos uma enorme diferença na magnitude. Veja alguns problemas disso:

-   **Linhas de base zero em alturas diferentes podem enganar:** as proporções de duas escalas são frequentemente diferentes uma da outra em um gráfico com dois eixos. Se o gráfico da esquerda começar no zero, ele seria duas vezes mais longo e se o da direita começar do zero, teria que ser três vezes mais longo.

![](images/full-180508_index12.png){fig-align="center"}

Portanto, embora o gráfico pareça que o PIB alemão e o PIB global aumentam aproximadamente na mesma taxa (pelo menos até 2014), isso não acontece. O PIB global aumentou 80% até 2014; o PIB da Alemanha em 40%.

A maioria das pessoas é acostumada a ver gráficos de linha com apenas uma escala. Então, quando elas vêem um gráfico de linhas com duas escalas, a intuição delas é pensar "Isto é como ler um gráfico com uma linha" - modo: "Oh, duas linhas, legal, mesma taxa, interessante. Os leitores precisam se lembrar ativamente de que essas duas linhas têm menos relação do que estão acostumados a ver em um gráfico de linhas.

Mas este é um problema que pode ser resolvido? Nós podemos apenas estabelecer a linha do zero na mesma altura. Exceção:

-   **Mesmo linhas de base zero na mesma altura podem enganar:**

Se extendermos os dois eixos até a base zero, ele podem ter a mesma altura. No melhor dos casos, os leitores podem agora pensar: "Parece que o produto interno bruto local aumentou mais que o produto interno bruto da Alemanha". No pior dos casos, os leitores podem pensar: "Nos primeiros anos, o produto interno bruto da Alemanha foi maior que o produto interno bruto Global. E então em 2011, os dois produtos internos brutos foram os mesmos."

![](images/full-180508_index11.png){fig-align="center"}

Por que os leitores pensariam assim? Porque os humanos têm a tendência de colocar as coisas em relação se estiverem por perto, e essa relação se torna uma grande parte do significado que eles veem nas coisas. Pontos de dados e séries de dados não são exceções nesses casos. Nós automaticamente comparamos linhas e pontos uns com os outros, então se torna difícil lembrar que diferentes escalas estão envolvidas. Se as coisas parecem próximas nos gráficos, é difícil lembrar constantemente que na verdade, eles estão a quilômetros de distância.

#### Eles são apenas difíceis de ler

"Ha", você poderia dizer, "os leitores apenas necessitam olhar mais atentamente para o gráfico. Olhei para este gráfico por um minuto e descobri tudo." Bem, que bom para você. Mas a maioria dos nossos leitores não gostam de raciocinar demais na leitura deles. (Que é ok, nós devemos fazer a matemática para eles.)

Um estudo de 2011 confirma essa afirmação. Petra Isenberg, Anastasia Bezerianos, Pierre Dragicevic and Jean-Daniel Fekete mostraram a 15 pessoas quatro diferentes gráficos em que todos mostravam valores em diferentes magnitudes, e observaram como bem elas poderiam ler os gráficos. Um deles era um gráfico com dois eixos, que os pesquisadores chamaram de "gráfico sobreposto".

O que eles encontraram foi:

> *Nós econtramos que o gráfico sobreposto performaram pobremente em termos de acurácia e tempo. O feedback dos participantes no questionário também foi claramente contra o gráfico sobreposto e ele foi rankeado como o pior por todos, exceto um participante. Os participantes acharam ele muito confuso e com alta demanda de concentração ou reflexão para decifrar a não-monótica e descontínua natureza das duas escalas.*
>
> --- [A Study on Dual-Scale Data Charts](https://www.lri.fr/~isenberg/publications/papers/Isenberg_2011_ASO.pdf)

Os pesquisadores vão além e recomendam evitar completamente gráficos com dois eixos. Nós concordamos. Nós tentamos mostrar que o perigo dos gráficos com dois eixos é que eles não são intuitivos. Os designers de gráficos tem a liberdade de manipular os eixos como eles desejam, que podem levar a primeira impressão visual muito diferente do que os dados realmente dizem.

#### Alternativas

Entretanto, há esperança! Existem alternativas. Aqui n´so iremos apresentar quatro delas: dois gráficos, gráficos indexados, gráficos de dispersão rotulados e conectados.

-   **Solução 1: gráfico lado-a-lado:** se o problema é que as duas linhas criam um único significado porque elas estão próximas, então devemos separar elas. A primeira solução é criar dois diferentes gráficos com as duas séries de dados, também chamados de gráficos lado-a-lado (side-by-side-charts). A vantagem é que nos gráficos lado a lado não importa o quanto os números diferem: nós podemos criar dois diferentes eixos para dois gráficos diferentes. A diferença é que dois gráficos pode necessitar de mais espaço do que apenas um.
